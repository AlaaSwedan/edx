(function(e){"use strict";RequireJS.define("js/learner_dashboard/views/unenroll_view",["backbone","jquery","underscore","gettext"],function(e,r,s,n){return e.View.extend({el:".unenroll-modal",switchToSlideOne:function(){var e,r;for(e=document.querySelector(".options"),r=e.children.length-1;r>=0;r--)e.appendChild(e.children[Math.random()*r|0]);this.$(".inner-wrapper header").hide(),this.$("#unenroll_form").hide(),this.$(".slide1").removeClass("hidden")},switchToSlideTwo:function(){var e=this.$(".reasons_survey input[name='reason']:checked").attr("val");"Other"===e&&(e=this.$(".other_text").val()),e&&window.analytics.track("unenrollment_reason.selected",{category:"user-engagement",label:e,displayName:"v1"}),this.$(".slide1").addClass("hidden"),this.$(".survey_course_name").text(this.$("#unenroll_course_name").text()),this.$(".slide2").removeClass("hidden"),this.$(".reasons_survey .return_to_dashboard").attr("href",this.urls.dashboard),this.$(".reasons_survey .browse_courses").attr("href",this.urls.browseCourses)},unenrollComplete:function(e,s){200===s.status?this.isEdx?(this.switchToSlideOne(),this.$(".reasons_survey:first .submit_reasons").click(this.switchToSlideTwo.bind(this))):location.href=this.urls.dashboard:403===s.status?location.href=this.urls.signInUser+"?course_id="+encodeURIComponent(r("#unenroll_course_id").val())+"&enrollment_action=unenroll":r("#unenroll_error").text(n("Unable to determine whether we should give you a refund because of System Error. Please try again later.")).stop().css("display","block")},initialize:function(e){this.urls=e.urls,this.isEdx=e.isEdx,r("#unenroll_form").on("ajax:complete",this.unenrollComplete.bind(this))}})})}).call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("js/learner_dashboard/unenrollment_factory",["js/learner_dashboard/views/unenroll_view"],function(e){return function(r){var s=new e(r);return s}})}.call(this,define||RequireJS.define);